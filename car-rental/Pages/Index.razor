@page "/"
@using System.Linq;
@using car_rental_common.Classes;
@using car_rental_common.Enums;
@using car_rental_data.Interfaces;
@inject IData DataService

<PageTitle>Index</PageTitle>

<h3>Bookings</h3>
<table class="table table-hover">
    <thead>
        <tr>
            <th scope="col">RegNo</th>
            <th scope="col">Customer</th>
            <th scope="col">Km Rented</th>
            <th scope="col">Rented Date</th>
            <th scope="col">Returned</th>
            <th scope="col">Cost</th>
            <th scope="col">Status</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var booking in bookings)
        {
            <tr>
                <td>@booking.Vehicle.RegNo</td>
                <td>@booking.Customer.FirstName @booking.Customer.LastName</td>
                <td>@booking.KmRented</td>
                <td>@booking.RentedDate</td>
            </tr>
        }

        <tr>
            <th scope="row">2</th>
            <td>Jacob</td>
            <td>Thornton</td>
            <td></td>
        </tr>
        <tr>
            <th scope="row">3</th>
            <td colspan="2">Larry the Bird</td>
            <td></td>
        </tr>
    </tbody>
</table>

@code {
    private List<Booking>? bookings;
    private List<Customer>? customers;
    private List<Vehicle>? vehicles;

    protected override void OnInitialized()
    {
        bookings = DataService.GetBookings().Cast<Booking>().ToList();
        customers = DataService.GetCustomers().Cast<Customer>().ToList();
    }
}